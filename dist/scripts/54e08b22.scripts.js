(function(){"use strict";angular.module("votacoesCamaraApp",["ngRoute","nvd3ChartDirectives"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:party_id/:year",{templateUrl:"views/party.html",controller:"PartyCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("votacoesCamaraApp").controller("MainCtrl",["$scope","parties",function(a,b){return a.parties=b,a.filepaths=["data/matrix-pt-2004.json","data/matrix-pt-2005.json","data/matrix-pt-2006.json","data/matrix-pt-2007.json","data/matrix-psol-2007.json"],a.filepath=a.filepaths[0]}])}.call(this),function(){"use strict";angular.module("votacoesCamaraApp").directive("adjacencyMatrix",function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return f=void 0,d={top:10,right:0,bottom:10,left:130},i=720,c=720,g=2e3,h=1.1*c,j=d3.scale.ordinal().rangeBands([0,i]),b=d3.scale.quantile().domain([.5,1]).range(["#225ea8","#41b6c4","#a1dab4","#ffffcc","#fed98e","#fe9929","#cc4c02"]),a=function(){var a,c,d,e,f,g,h,i,j,k,l,m;for(c=b.range(),d=b.domain(),g=d[0],f=d[1],i=(f-g)/(c.length-1),m=[],e=k=0,l=c.length;l>k;e=++k)a=c[e],j=g+e*i,h=e>0?g+(e-1)*i:0,m.push({color:a,threshold:j,width:""+100*(j-h)+"%"});return m},e=function(a,b){var c,d,e,f;return c=[],e=b.nodes,d=e.length,e.forEach(function(a,b){return a.index=b,a.count=0,c[b]=d3.range(d).map(function(a){return{x:a,y:b,z:0}})}),b.links.forEach(function(a){return c[a.source][a.target].z+=a.value,c[a.source].name=e[a.source].name,e[a.source].count+=a.value,e[a.target].count+=a.value}),f={count:d3.range(d).sort(function(a,b){return e[b].count-e[a].count})},j.domain(f.count),m(a,c)},m=function(a,b){var c;return f=d3.select(a).select("g"),c=p(b),n(b),o(c),f.selectAll(".row").each(k)},p=function(a){var b,c,d;return d=function(a,b){return"translate(0, "+j(b)+")"},b=function(){return"translate(0, "+h+")"},c=l(a,"row",d,b),c.attr("transform","translate(0, "+-h+")"),c},n=function(a){var b,c,d;return d=function(a,b){return"translate("+j(b)+")rotate(-90)"},c=function(){return"translate("+h+")rotate(-90)"},b=l(a,"column",d,c),b.attr("transform","translate("+-h+")rotate(-90)"),b},o=function(a){return a.append("text").attr("y",j.rangeBand()/2).attr("dy",".32em").text(function(a){return a.name}).attr("x",-6).attr("text-anchor","end")},k=function(a){var c;return c=d3.select(this).selectAll(".cell").data(a.filter(function(a){return a.z})),c.enter().append("rect").attr("class","cell"),c.attr("x",function(a){return j(a.x)}).attr("width",j.rangeBand()).attr("height",j.rangeBand()).style("fill",function(a){return b(a.z)}).on("mouseover",r).on("mouseout",q),c.exit().remove()},l=function(a,b,c,d){var e,h;return h=f.selectAll("."+b).data(a,function(a){return a.name}),e=h.enter().append("g").attr("class",b),h.transition().duration(g).attr("transform",c),h.exit().transition().duration(g).attr("transform",d).remove(),e},r=function(a){return f.selectAll(".row").classed("active",function(b){return b[0].y===a.y||b[0].y===a.x})},q=function(){return f.selectAll(".row.active").classed("active",!1)},{restrict:"E",templateUrl:"views/directives/adjacencyMatrix.html",scope:{graph:"="},link:function(b,f){return b.width=i,b.height=c,b.margin=d,b.scales=a(),b.$watch("graph",function(a){return a?e(f[0],a):void 0})}}})}.call(this),function(){"use strict";angular.module("votacoesCamaraApp").controller("PartyCtrl",["$routeParams","$scope","$http","parties",function(a,b,c,d){return b.party=d[a.party_id],b.year=a.year,b.$watch("year",function(a){return b.filepath="data/"+b.party.id+"-"+a+".json",c.get(b.filepath).success(function(a){return b.graph=a})})}])}.call(this),function(){"use strict";angular.module("votacoesCamaraApp").constant("parties",{pt:{id:"pt",label:"PT",years:["2002","2003","2004","2005","2006","2007"]},pmdb:{id:"pmdb",label:"PMDB",years:["2002","2003","2004","2005","2006","2007"]},psol:{id:"psol",label:"PSOL",years:["2007"]},mensaleiros:{id:"mensaleiros",label:"Mensaleiros",years:["2000","2001","2002","2003","2004","2005","2006","2007"]}})}.call(this),function(){"use strict";angular.module("votacoesCamaraApp").directive("histogram",["$filter",function(a){return{restrict:"E",templateUrl:"views/directives/histogram.html",scope:{graph:"="},link:function(b){return b.tickFormat=a("roundedPercentual"),b.$watch("graph",function(a){var c,d,e,f;return a?(f=function(){var b,c,d,f;for(d=a.links,f=[],b=0,c=d.length;c>b;b++)e=d[b],f.push(e.value);return f}(),d=d3.layout.histogram().bins([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1]),f=function(){var a,b,e,g;for(e=d(f),g=[],a=0,b=e.length;b>a;a++)c=e[a],g.push([c.x,c.y/f.length]);return g}(),b.data=[{values:f}]):void 0})}}}])}.call(this),function(){"use strict";angular.module("votacoesCamaraApp").filter("roundedPercentual",function(){return function(a){return a=100*a||0,""+Math.round(a)+"%"}})}.call(this);